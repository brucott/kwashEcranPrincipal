(function(){function A(){return}String.prototype.endsWith=function(af){return this.indexOf(af,this.length-af.length)!==-1};A.getTextHeight=function(af){return af.measureText("M").width*1.2};A.getLines=function(ah,aq,ap){var al=aq.split("\n"),an,ak=[],ar,am,ag=0,ao,aj,ai,af;for(ai=0;ai<al.length;ai+=1){an=al[ai].split(" ");ar=an[0];ag=ah.measureText(ar).width;ao=" ";if(an.length===1){ag=ah.measureText(ar).width;if(ag<ap){ak.push({text:ar,length:ag});continue}an=al[ai].split("");ar=an[0];ao="";if(an.length===1){ak.push({text:ar,length:ag});continue}}for(aj=1;aj<an.length;aj+=1){af=an[aj];am=ag;ag=ah.measureText(ar+ao+af).width;if(ag<ap){ar+=(ao+af);am=ag}else{ak.push({text:ar,length:am});ar=af;am=undefined}if(aj===an.length-1){if(am===undefined){am=ah.measureText(ar).width}ak.push({text:ar,length:am});break}}}return ak};A.debouncer=function(af,ag){var ah;return function(){var aj,ai;aj=this;ai=arguments;clearTimeout(ah);ah=setTimeout(function(){af.apply(aj,Array.prototype.slice.call(ai))},ag)}};A.Utf8ArrayToStr=function v(al){var ag,ai,af,ak,aj,ah;ag="";af=al.length;ai=0;while(ai<af){ak=al[ai];ai+=1;switch(ak>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:ag+=String.fromCharCode(ak);break;case 12:case 13:aj=al[ai];ai+=1;ag+=String.fromCharCode(((ak&31)<<6)|(aj&63));break;case 14:aj=al[ai];ai+=1;ah=al[ai];ai+=1;ag+=String.fromCharCode(((ak&15)<<12)|((aj&63)<<6)|((ah&63)<<0));break}}return ag};A.PadTo4=function(af){return((af-1)|3)+1};function C(){return}C.Options={ImageAA:0,FixScaleOnResize:1,FixZoomOn1:2};C.Names=[];C.Names[C.Options.ImageAA]="ImageAA";C.Names[C.Options.FixScaleOnResize]="FixOnResize";C.Names[C.Options.FixZoomOn1]="FixZoomOn1";C.APP_DATA_PREFIX="APP_DATA_";C.prototype.Values=[];C.prototype.Values[C.Options.ImageAA]=true;C.prototype.Values[C.Options.FixScaleOnResize]=true;C.prototype.Values[C.Options.FixZoomOn1]=false;C.prototype.Controls=[];C.prototype.IsStorageSupported=undefined;C.prototype.InitSettings=function(){var ah,ag,af;ah=this.CreateCheckBox("Fix on 100% scale","settingFixZoomOn1",C.Options.FixZoomOn1);C.prototype.Controls[C.Options.FixZoomOn1]=ah;ag=this.CreateCheckBox("Auto scale on resize","settingResizeAutoScale",C.Options.FixScaleOnResize);C.prototype.Controls[C.Options.FixScaleOnResize]=ag;af=this.CreateCheckBox("Use antialiasing for images.","settingCheckAA",C.Options.ImageAA);C.prototype.Controls[C.Options.ImageAA]=af;this.UpdateAvailability()};C.prototype.OnCheckSettingsChanged=function(af,ag){var ah=af.checked;this.SaveSetting(ag,ah);this.UpdateAvailability()};C.prototype.UpdateAvailability=function(){var af=document.getElementById("settingResizeAutoScale");af.disabled=this.Values[C.Options.FixZoomOn1]};C.prototype.StorageSupported=function(){if(C.prototype.IsStorageSupported===undefined){var ag="test";try{localStorage.setItem(ag,ag);localStorage.removeItem(ag);C.prototype.IsStorageSupported=true}catch(af){C.prototype.IsStorageSupported=false}}return C.prototype.IsStorageSupported};C.prototype.SaveSetting=function(ag,ah){if(!this.StorageSupported()){return}C.prototype.Values[ag]=ah;var af=C.Names[ag];localStorage.setItem(af,ah)};C.prototype.GetSetting=function(ah){if(!this.StorageSupported()){return}var ag,af;ag=C.Names[ah];af=localStorage.getItem(ag);if(af===null){return}C.prototype.Values[ah]=af==="true";return af};C.prototype.CreateCheckBox=function(ah,aj,ag){var ai,af;ai=document.getElementById("settingsHolder");af=document.createElement("input");af.type="checkbox";af.id=aj;af.setAttribute("onclick","GWeb.Settings.OnCheckSettingsChanged(this,"+ag+")");this.GetSetting(ag);if(C.prototype.Values[ag]){af.setAttribute("checked","checked")}ai.appendChild(af);ai.innerHTML=ai.innerHTML+" "+ah+" <br/>";return af};C.prototype.SendAppData=function(al,ag){var ak,af,aj,ah,ai;if(al.byteLength-ag<4){return}af=new Uint32Array(al,ag,1);ah=af[0];ag+=4;if(al.byteLength-ag<ah){e.writeToLog("Failed to parse project name. At least:"+ah+" bytes are requred! Recieved only: "+(al.byteLength-ag));return -1}aj=new Uint8Array(al,ag,ah);ai=A.Utf8ArrayToStr(aj);ai=C.APP_DATA_PREFIX+ai;if(this.StorageSupported()){ak=localStorage.getItem(ai)}else{ak=""}e.ws.send("APP_STATE:"+ak)};C.prototype.StoreAppData=function(am,ag){var af,al,ai,ah,ak,aj;if(!this.StorageSupported()){return}if(am.byteLength-ag<12){return}af=new Uint32Array(am,ag,2);ah=af[0];aj=af[1];ag+=8;if(am.byteLength-ag<ah){e.writeToLog("Failed to parse project name. At least:"+ah+" bytes are requred! Recieved only: "+(am.byteLength-ag));return -1}al=new Uint8Array(am,ag,ah);ai=A.Utf8ArrayToStr(al);ai=C.APP_DATA_PREFIX+ai;ag+=ah;if(am.byteLength-ag<aj){e.writeToLog("Failed to parse APP_DATA. At least:"+aj+" bytes are requred! Recieved only: "+(am.byteLength-ag));return -1}al=new Uint8Array(am,ag,aj);ak=A.Utf8ArrayToStr(al);ag+=aj;localStorage.setItem(ai,ak);return A.PadTo4(ag)};function e(){return}e.WsState={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3};e.WsCodes={PAINT_DATA_CODE:3,MOUSE_DATA_CODE_MOVE:10,MOUSE_DATA_CODE_DOWN:11,MOUSE_DATA_CODE_UP:12,IMAGE_DATA_RESPONSE_CODE:1,IMAGE_DATA_REQUEST_CODE:2,INVALIDATE_CODE:13,FONT_DATA_RESPONSE_CODE:14,FONT_DATA_REQUEST_CODE:15,FONT_CACHE_RESET_CODE:16,STOP_DRAW_DATA_CODE:17,RESUME_DRAW_DATA_CODE:18,CHAR_DATA_CODE:19,GESTURE_SWIPE:20,IMAGE_DATA_FAIL:21,STORE_PARAM:22,GET_PARAM:23,ARROW_DATA_CODE:24};e.ws=null;e.WS_NAME="ws";e.WSS_NAME="wss";e.header=null;e.canvas=null;e.context=null;e.timeout=2;e.timeoutIsPending=false;e.missedHearhBeats=0;e.closeReasonCode=-1;e.closeReasonSubCode=65535;e.elements=[];e.mainDiv=null;e.debugMode=true;e.actualLogEntries=0;e.maxLogEntries=200;e.logPingPongs=false;e.logPerformance=true;e.gwsHasConnected=false;e.drawingReady=false;e.minZoomFactor=1;e.maxZoomFactor=1;e.zoomFactor=-1;e.zoomFactorInCanvas=1;e.maxZoomedCanvasSize=2732;e.pinchZoom=0;e.Menu=null;e.Settings=new C();e.PanInProgress=false;e.PinchInProgress=false;e.ResetZoomOnResize=true;e.enableMouseMove=false;e.lastMouseDownCoords={x:0,y:0};e.lastTouch=null;e.inControlGRSMode=true;e.isReconnectionEnabled=true;e.zeroPoint={x:0,y:0};e.lastZeroPoint={x:0,y:0};e.panCenterPoint=null;e.visibilityTimer=false;e.singleCodeBuffer=new ArrayBuffer(4);e.singleCodeView=new Uint32Array(e.singleCodeBuffer,0,1);e.scrollBuffer=new ArrayBuffer(16);e.uint32ScrollView=new Uint32Array(e.scrollBuffer,0,4);e.uint16ScrollView=new Uint16Array(e.scrollBuffer,0,8);e.ScrollDirectionMap=[];e.ScrollDirectionMap[Hammer.DIRECTION_NONE]=0;e.ScrollDirectionMap[Hammer.DIRECTION_DOWN]=3;e.ScrollDirectionMap[Hammer.DIRECTION_LEFT]=4;e.ScrollDirectionMap[Hammer.DIRECTION_UP]=1;e.ScrollDirectionMap[Hammer.DIRECTION_RIGHT]=2;e.timeoutSpinner=undefined;e.timeoutSpinnerOpts={lines:13,length:28,width:14,radius:42,scale:1,corners:1,color:"#0079C1",opacity:0.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2000000000,className:"spinner",top:"50%",left:"50%",shadow:false,hwaccel:false,position:"absolute"};e.writeToLog=function(af){if(e.actualLogEntries>e.maxLogEntries){$("#logTextArea").val("");e.actualLogEntries=0}console.log(af);$("#logTextArea").val($("#logTextArea").val()+"\n"+af);e.actualLogEntries+=1};e.isCanvasSupported=function(){var af=document.createElement("canvas");return !!(af.getContext&&af.getContext("2d"))};e.isInFullScreen=function(){return window.screenfull.enabled&&window.screenfull.isFullscreen};e.fullScreen=function(){if(window.screenfull.enabled){window.screenfull.request(e.mainDiv)}else{alert("Fullscreen is not supported by your browser.")}};e.getTargetURL=function(){var ah,af,ag;ah=window.location.href;af=ah.indexOf("://");ag=(location.protocol==="https:")?e.WSS_NAME:e.WS_NAME;return ag+ah.substring(af,ah.length)};e.GetCloseReason=function(){return e.closeReasonCode};e.GetCloseReasonSubCode=function(){return e.closeReasonSubCode};e.IsConnected=function(){return e.ws!==undefined&&e.gwsHasConnected&&e.ws.readyState===e.WsState.OPEN};e.GetTotalWSUpload=function(){return e.totalBytesRecieved};e.GetZoomFactor=function(){return e.zoomFactor};e.visibilityChanged=function(){if(!document.hidden){if(e.visibilityTimer){clearInterval(e.visibilityTimer);e.visibilityTimer=false}else{e.sendVisibilityInfo(true)}}else{e.visibilityTimer=window.setInterval(function(){e.sendVisibilityInfo(false)},5000)}};e.sendVisibilityInfo=function(af){if(!af&&e.visibilityTimer===false){return}clearInterval(e.visibilityTimer);e.visibilityTimer=false;if(af){e.writeToLog("Resuming draw data flow.");e.elements=[];e.cleanCanvas();e.singleCodeView[0]=e.WsCodes.RESUME_DRAW_DATA_CODE}else{e.writeToLog("Pausing draw data flow.");e.singleCodeView[0]=e.WsCodes.STOP_DRAW_DATA_CODE}e.ws.send(e.singleCodeView)};e.sendChar=function(ai){var ag,af,ah;if(!e.IsConnected()){return}ag=new ArrayBuffer(8);af=new Uint32Array(ag,0,1);ah=new Uint16Array(ag,4,1);af[0]=e.WsCodes.CHAR_DATA_CODE;ah[0]=ai;e.ws.send(ag)};e.sendarrowcode=function(ai){var ag,af,ah;if(!e.IsConnected()){return}ag=new ArrayBuffer(8);af=new Uint32Array(ag,0,1);ah=new Uint16Array(ag,4,2);af[0]=e.WsCodes.ARROW_DATA_CODE;if(ai===37){ah[1]=331}else{if(ai===38){ah[1]=328}else{if(ai===39){ah[1]=333}else{if(ai===40){ah[1]=336}}}}ah[0]=ai;e.ws.send(ag)};e.getKeyCode=function(af){if(window.event){af=window.event}return af.which||af.keyCode};e.onKeyDown=function(ag){var af=e.getKeyCode(ag);if(af===27||af===8||af===13){e.sendChar(af)}else{if(af===37||af===38||af===39||af===40){e.sendarrowcode(af)}}if(af===8){ag.preventDefault()}};e.onKeyPress=function(ag){var af=e.getKeyCode(ag);if(af!==27&&af!==8&&af!==13&&af!==37&&af!==38&&af!==39&&af!==40){e.sendChar(af)}};e.CheckZoomAndPan=function(){e.FixMinAndDefaultZoomFactor();if(e.Settings.Values[C.Options.FixScaleOnResize]){e.zoomFactor=e.minZoomFactor}e.UpdateCanvasSize();e.FixPanZeroPoint()};e.Swipe=function(ag){var ah=e.ScrollDirectionMap[ag.direction],af;if(!e.IsConnected()||!e.inControlGRSMode){return}if(ah!==undefined){af={x:(ag.center.x-ag.deltaX),y:(ag.center.y-ag.deltaY)};af=e.ConvertToCanvasCoordinates(af);e.uint32ScrollView[0]=e.WsCodes.GESTURE_SWIPE;e.uint16ScrollView[2]=af.x;e.uint16ScrollView[3]=af.y;e.uint32ScrollView[2]=ah;e.uint32ScrollView[3]=Math.abs(Math.round(ag.velocity*1000));e.ws.send(e.uint32ScrollView)}};function R(){return}e.Menu=new R();R.prototype.ShowMenu=function(){$("#menuDiv").slideToggle(0,e.Menu.ShowMenuDone);return false};R.prototype.ShowMenuDone=function(){$("#bigShowMenuButton").css("display","none");$(e.mainDiv).removeClass("mainDivSmallButton");$(e.mainDiv).addClass("mainDivBigButton");e.RefreshOnScreenCanvas()};R.prototype.HideMenu=function(){$("#menuDiv").slideToggle(0,e.Menu.HideMenuDone);return false};R.prototype.HideMenuDone=function(){$("#bigShowMenuButton").css("display","block");$(e.mainDiv).removeClass("mainDivBigButton");$(e.mainDiv).addClass("mainDivSmallButton");e.RefreshOnScreenCanvas()};R.prototype.InitMenu=function(){var aj,au,av,ai,an,al,aq,at,ah,ar,ap,ak,af,am,ag,ao;aj=this.CreateNewMenuButton("","settingsButton","Settings");ak=document.createElement("img");ak.alt="Settings";ak.src="settings.svg";$(aj).append(ak);aj.onclick=this.ToggleSettings;av=this.CreateNewMenuButton("","logoutButton","Logout");af=document.createElement("img");af.alt="Logout";af.src="logout.svg";$(av).append(af);av.onclick=this.Logout;if(window.screenfull.enabled){au=this.CreateNewMenuButton("","fullscreenButton","Fullscreen");am=document.createElement("img");am.alt="Fullscreen";am.src="fullscreen.svg";$(au).append(am);au.onclick=e.fullScreen}ai=this.CreateNewMenuButton("","zoomInButton");an=document.createElement("img");an.alt="+";an.src="zoomIn.svg";$(ai).append(an);ai.onclick=this.ZoomIn;al=this.CreateNewMenuButton("","zoomOutButton");aq=document.createElement("img");aq.alt="-";aq.src="zoomOut.svg";$(al).append(aq);al.onclick=this.ZoomOut;at=this.CreateNewMenuButton("","togglePanAndControlButton","Pan/Control");ah=document.createElement("img");ah.alt="Pan/Zoom";ah.src="Move.svg";$(at).append(ah);at.onclick=this.TogglePanAndControl;ag=this.CreateNewMenuButton("","reconnectButton","Reconnect");ao=document.createElement("img");ao.alt="Reconnect";ao.src="reconnect.svg";$(ag).append(ao);ag.onclick=this.ToggleReconnect;ar=this.CreateNewMenuButton("","collapseButton","Collapse");ap=document.createElement("img");ap.alt="\u2228 \u2228 \u2228";ap.src="arrowDown.svg";$(ar).append(ap);ar.onclick=this.HideMenu};R.prototype.TogglePanAndControl=function(){e.inControlGRSMode=!e.inControlGRSMode;if(e.inControlGRSMode){$("#togglePanAndControlButton").removeClass("Toggled")}else{$("#togglePanAndControlButton").addClass("Toggled")}};R.prototype.ZoomIn=function(){e.SetZoomFactor(e.zoomFactor+1)};R.prototype.ZoomOut=function(){e.SetZoomFactor(e.zoomFactor-1)};R.prototype.ToggleReconnect=function(){e.isReconnectionEnabled=!e.isReconnectionEnabled;if(e.isReconnectionEnabled){$("#reconnectButton img").attr("src","reconnect.svg")}else{$("#reconnectButton img").attr("src","reconnectOff.svg")}};R.prototype.Reconnect=function(){e.disconnectWSConnection();location.reload()};R.prototype.Logout=function(){e.logout()};R.prototype.ToggleSettings=function(){if($("#settingsOverlay").css("display")==="none"){$("#settingsOverlay").css("display","block")}else{$("#settingsOverlay").css("display","none");e.FixMinAndDefaultZoomFactor();e.UpdateCanvasSize();e.FixPanZeroPoint();e.RefreshOnScreenCanvas()}};R.prototype.CreateNewMenuButton=function(ah,ai,ag){var af=document.createElement("button");af.className="menuButton";af.id=ai;af.innerText=ah;if(ag!==undefined){af.title=ag}$("#menuDiv").append(af);return af};function f(){this.visible=true}f.objectActivators=[];f.prototype.Ready=function(){return true};f.prototype.canBeSkipped=function(){return true};function u(ai,ah,af,ag){f.call(this);this.r=ai;this.g=ah;this.b=af;this.a=ag;this.RefreshString()}f.objectActivators[8]=u;u.ByteSize=4;u.prototype=Object.create(f.prototype);u.prototype.constructor=u;u.prototype.parseElement=function(ag,ah){if(ag.byteLength-ah<u.ByteSize){e.writeToLog("Failed to parse color. At least: "+u.ByteSize+" bytes are requred! Recieved only: "+ag.byteLength-ah);return -1}var af=new Uint8Array(ag,ah,4);this.b=af[0];this.g=af[1];this.r=af[2];this.a=af[3];this.RefreshString();return ah+u.ByteSize};u.createElement=function(){var af=new u();return af};u.prototype.RefreshString=function(){this.asString="rgba("+this.r+","+this.g+","+this.b+","+(this.a/255)+")"};u.prototype.draw=function(af){af.fillStyle=this.asString;af.strokeStyle=this.asString};function aa(ag,ai,ah,af){f.call(this);this.x=ag;this.y=ai;this.width=ah;this.height=af}aa.prototype=Object.create(f.prototype);aa.prototype.constructor=aa;aa.prototype.containsPoint=function(af,ag){if(af>this.x&&af<this.x+this.width&&ag>this.y&&ag<this.y+this.height){return true}return false};aa.prototype.parseElement=function(af,ag){ag=this.parseBasicProperties(af,ag);if(ag<0){return -1}return ag};aa.prototype.parseBasicProperties=function(ag,ai){var af,ah;af=8;if(ag.byteLength-ai<af){e.writeToLog("Failed to parse rectangle. At least: "+af+" bytes are requred! Recieved only: "+ag.byteLength-ai);return -1}ah=new Int16Array(ag,ai,4);this.x=ah[0];this.y=ah[1];this.width=ah[2];this.height=ah[3];return ai+af};function ae(){f.call(this)}f.objectActivators[5]=ae;ae.prototype=Object.create(f.prototype);ae.prototype.constructor=ae;ae.SizeInBytes=12;ae.Properties={NORMAL:0,DOTTED:1,WIDEDOTTED:2,DASHED:3,WIDEDASHED:4,DASHEDLEGACY:5};ae.createElement=function(){var af=new ae();return af};ae.prototype.parseElement=function(ag,ah){var af;if(ag.byteLength-ah<ae.SizeInBytes){e.writeToLog("Failed to parse line. At least: "+ae.SizeInBytes+" bytes are requred! Recieved only: "+ag.byteLength-ah);return -1}af=new Int16Array(ag,ah,6);this.x1=af[0];this.y1=af[1];this.x2=af[2];this.y2=af[3];ah+=8;this.lineWidth=af[4];ah+=2;this.dashed=af[5];ah+=2;return A.PadTo4(ah)};ae.prototype.draw=function(ag){var af=0;var ah=0;ag.beginPath();if(this.dashed!==ae.Properties.NORMAL){if(this.dashed===ae.Properties.DASHEDLEGACY){af=5;ah=5}else{if(this.dashed===ae.Properties.DOTTED){af=this.lineWidth;ah=this.lineWidth}else{if(this.dashed===ae.Properties.WIDEDOTTED){af=this.lineWidth;ah=3*this.lineWidth}else{if(this.dashed===ae.Properties.DASHED){af=3*this.lineWidth;ah=this.lineWidth}else{if(this.dashed===ae.Properties.WIDEDASHED){af=3*this.lineWidth;ah=3*this.lineWidth}}}}}ag.setLineDash([af,ah])}ag.lineWidth=this.lineWidth;ag.moveTo(this.x1,this.y1);ag.lineTo(this.x2,this.y2);ag.stroke();ag.closePath();if(this.dashed){ag.setLineDash([])}};function B(){f.call(this)}f.objectActivators[14]=B;B.prototype=Object.create(f.prototype);B.prototype.constructor=B;B.MinSizeInBytes=28;B.Current=null;B.createElement=function(){var af=new B();return af};B.prototype.parseElement=function(af,ah){var ag;if(af.byteLength-ah<B.MinSizeInBytes){e.writeToLog("Failed to parse frame info. At least: "+B.MinSizeInBytes+" bytes are requred! Recieved only: "+af.byteLength-ah);return -1}ag=new Uint8Array(af,ah,4);this.frameWidth=ag[0];this.shadowWidthDisplay=ag[1];this.shadowWidthButton=ag[2];ah+=4;this.frameColorOn=new u();ah=this.frameColorOn.parseElement(af,ah);this.topLeftOn=new u();ah=this.topLeftOn.parseElement(af,ah);this.bottomRightOn=new u();ah=this.bottomRightOn.parseElement(af,ah);this.frameColorOff=new u();ah=this.frameColorOff.parseElement(af,ah);this.topLeftOff=new u();ah=this.topLeftOff.parseElement(af,ah);this.bottomRightOff=new u();ah=this.bottomRightOff.parseElement(af,ah);return A.PadTo4(ah)};B.prototype.draw=function(af){B.Current=this};B.prototype.canBeSkipped=function(){return false};function n(){aa.call(this)}f.objectActivators[15]=n;n.prototype=Object.create(aa.prototype);n.prototype.constructor=n;n.AdditionalSizeInBytes=4;n.FrameType={DISPLAY:0,ON:1,OFF:2};n.createElement=function(){var af=new n();return af};n.prototype.parseElement=function(af,ah){var ag;ah=aa.prototype.parseElement.call(this,af,ah);if(ah<0){return -1}if(af.byteLength-ah<n.AdditionalSizeInBytes){e.writeToLog("Failed to parse frame info. At least: "+n.AdditionalSizeInBytes+" bytes are requred! Recieved only: "+af.byteLength-ah);return -1}ag=new Uint8Array(af,ah,4);this.frameType=ag[0];ah+=1;return A.PadTo4(ah)};n.prototype.draw=function(af){var aj=B.Current,al,ao,ah,ap,am=0,ar,ai,ag,ak,aq,an;af.save();ar=(this.frameType===n.FrameType.ON)?aj.frameColorOn:aj.frameColorOff;al=(this.frameType===n.FrameType.DISPLAY)?aj.shadowWidthDisplay:aj.shadowWidthButton;ao=(this.frameType===n.FrameType.ON)?aj.topLeftOn:aj.topLeftOff;ah=(this.frameType===n.FrameType.ON)?aj.bottomRightOn:aj.bottomRightOff;ap=(this.frameType===n.FrameType.DISPLAY)?0:aj.frameWidth;if(this.frameType===n.FrameType.DISPLAY){an=ao;ao=ah;ah=an}if(ap>0){af.strokeStyle=ar.asString;af.lineWidth=ap;af.beginPath();af.rect(this.x+(ap/2),this.y+(ap/2),this.width-ap,this.height-ap);af.closePath();af.stroke();am=ap}ai=this.x+am;ag=this.y+am;ak=this.width-2*am;aq=this.height-2*am;if(al>0){af.fillStyle=ao.asString;af.beginPath();af.moveTo(ai,ag);af.lineTo(ai,ag+aq);af.lineTo(ai+al,ag+aq-al);af.lineTo(ai+al,ag+al);af.lineTo(ai+ak-al,ag+al);af.lineTo(ai+ak,ag);af.closePath();af.fill();af.fillStyle=ah.asString;af.beginPath();af.moveTo(ai,ag+aq);af.lineTo(ai+ak,ag+aq);af.lineTo(ai+ak,ag);af.lineTo(ai+ak-al,ag+al);af.lineTo(ai+ak-al,ag+aq-al);af.lineTo(ai+al,ag+aq-al);af.closePath();af.fill()}af.restore()};function H(ag,ai,ah,af){aa.call(this,ag,ai,ah,af)}f.objectActivators[4]=H;H.prototype=Object.create(aa.prototype);H.prototype.constructor=H;H.createElement=function(){var af=new H();return af};H.prototype.draw=function(ai){var ah,aj,ag,af;ah=ai.fillStyle;aj=ai.strokeStyle;ag=ai.font;ai.restore();ai.save();af=e.Settings.Values[C.Options.ImageAA];ai.imageSmoothingEnabled=af;ai.webkitImageSmoothingEnabled=af;ai.mozImageSmoothingEnabled=af;ai.scale(e.zoomFactorInCanvas,e.zoomFactorInCanvas);ai.beginPath();ai.rect(this.x,this.y,this.width,this.height);ai.clip();ai.beginPath();ai.fillStyle=ah;ai.strokeStyle=aj;if(ai.font!==ag){ai.font=ag}};function O(ag,ai,ah,af){aa.call(this,ag,ai,ah,af);this.IsFilled=false;this.LineWidth=1}O.prototype=Object.create(aa.prototype);O.prototype.constructor=O;O.prototype.strokeOrFill=function(af){if(this.IsFilled){af.fill()}else{af.lineWidth=this.LineWidth;af.stroke()}};O.prototype.parseElement=function(ah,ai){var ag,af;ai=this.parseBasicProperties(ah,ai);if(ai<0){return -1}ag=new Uint16Array(ah,ai,1);this.LineWidth=ag[0];ai+=2;af=new Uint8Array(ah,ai,1);this.IsFilled=af[0];ai+=1;return A.PadTo4(ai)};function W(ag,ai,ah,af){O.call(this,ag,ai,ah,af);this.radiusX=0;this.radiusY=0}f.objectActivators[0]=W;W.prototype=Object.create(O.prototype);W.prototype.constructor=W;W.AdditionalSizeInBytes=4;W.createElement=function(){var af=new W();return af};W.prototype.draw=function(ag){var af=0;if(!this.IsFilled&&this.LineWidth>1){af=this.LineWidth/2}ag.beginPath();if(this.radiusX===0&&this.radiusY===0){ag.rect(this.x+af,this.y+af,this.width-(af*2),this.height-(af*2))}else{this.drawRounded(ag)}this.strokeOrFill(ag)};W.prototype.drawRounded=function(ag){ag.beginPath();var af=0;if(!this.IsFilled&&this.LineWidth>1){this.LineWidth/2}this.x+=af;this.y+=af;this.width-=af*2;this.height-=af*2;this.radiusX=Math.min((this.width-this.LineWidth)/2,this.radiusX);this.radiusY=Math.min((this.height-this.LineWidth)/2,this.radiusY);ag.moveTo(this.x,this.y+this.radiusY);ag.lineTo(this.x,this.y+this.height-this.radiusY);ag.quadraticCurveTo(this.x,this.y+this.height,this.x+this.radiusX,this.y+this.height);ag.lineTo(this.x+this.width-this.radiusX,this.y+this.height);ag.quadraticCurveTo(this.x+this.width,this.y+this.height,this.x+this.width,this.y+this.height-this.radiusY);ag.lineTo(this.x+this.width,this.y+this.radiusY);ag.quadraticCurveTo(this.x+this.width,this.y,this.x+this.width-this.radiusX,this.y);ag.lineTo(this.x+this.radiusX,this.y);ag.quadraticCurveTo(this.x,this.y,this.x,this.y+this.radiusY)};W.prototype.parseElement=function(ag,ah){var af;ah=O.prototype.parseElement.call(this,ag,ah);if(ah<0){return -1}if(ag.byteLength-ah<W.AdditionalSizeInBytes){e.writeToLog("Failed to parse rectangle. At least:"+W.AdditionalSizeInBytes+" bytes are requred! Recieved only: "+ag.byteLength-ah);return -1}af=new Int16Array(ag,ah,2);ah+=2;this.radiusX=af[0];this.radiusY=af[1];return A.PadTo4(ah)};function Z(){f.call(this);Z.fontName=Z.defaultFontType;Z.fontSize=12}f.objectActivators[7]=Z;Z.prototype=Object.create(f.prototype);Z.prototype.constructor=Z;Z.MinSizeInBytes=8;Z.loadedFonts=[];Z.fontInfoCache=[];Z.defaultFontType="Arial";Z.lastFontName="Arial";Z.boldSuffix=" Bold";Z.italicSuffix=" Italic";Z.LOADING_STATUS=null;Z.createElement=function(){var af=new Z();return af};Z.prototype.toString=function(){var af=Z.fontInfoCache[this.fontID];if(Z.loadedFonts[af.grsName]){return this.fontSize+"px "+af.grsName}return(af.prefix+" "+this.fontSize+"px "+af.fullName)};Z.getGRSFontName=function(af){return"GRS_"+af.replace(".","_")};Z.prototype.parseElement=function(ah,ai){var af,ag;if(ah.byteLength-ai<Z.MinSizeInBytes){e.writeToLog("Failed to parse font change. At least: "+Z.MinSizeInBytes+" bytes are requred! Recieved only: "+ah.byteLength-ai);return -1}af=new Uint32Array(ah,ai,1);this.fontID=af[0];ai+=4;ag=new Uint16Array(ah,ai,1);this.fontSize=ag[0];ai+=2;return A.PadTo4(ai)};Z.prototype.getFont=function(){if(!Z.fontInfoCache.hasOwnProperty(this.fontID)){this.requestFont()}return Z.fontInfoCache[this.fontID]};Z.prototype.requestFont=function(){var ag,af;Z.fontInfoCache[this.fontID]=null;ag=new ArrayBuffer(8);af=new Uint32Array(ag,0,2);af[0]=e.WsCodes.FONT_DATA_REQUEST_CODE;af[1]=this.fontID;e.ws.send(ag)};Z.parseFontData=function(an,ai){var al,aq,ap,am,aj,ao,ah,af,ak="",ag;if(an.byteLength-ai<8){e.writeToLog("Failed to parse font change. At least: 8 bytes are requred! Recieved only: "+an.byteLength-ai);return -1}ap=new Uint32Array(an,ai,1);ao=ap[0];ai+=4;aq=new Uint16Array(an,ai,2);am=aq[0];aj=aq[1];ai+=4;al=new Uint8Array(an,ai,am);ah=A.Utf8ArrayToStr(al);ai+=am;al=new Uint8Array(an,ai,aj);af=A.Utf8ArrayToStr(al);ai+=aj;if(af.endsWith(Z.boldSuffix)){ak="bold";af=af.substring(0,af.length-Z.boldSuffix.length)}else{if(af.endsWith(Z.italicSuffix)){ak="italic";af=af.substring(0,af.length-Z.italicSuffix.length)}}ag=Z.getGRSFontName(ah);Z.fontInfoCache[ao]={fileName:ah,fullName:af,prefix:ak,grsName:ag};if(Z.loadedFonts[ag]===undefined){Z.addFont(Z.fontInfoCache[ao])}return A.PadTo4(ai)};Z.clearCache=function(){Z.fontInfoCache=[]};Z.addFont=function(ah){var ag,af;if(ah.fileName===""){return}ag=document.createElement("style");ag.type="text/css";ag.textContent="@font-face { font-family:'"+ah.grsName+"'; src: url('"+ah.fileName+"'); }";document.head.appendChild(ag);af=Z.loadedFonts[ah.grsName];if(af===undefined){Z.loadedFonts[ah.grsName]=Z.LOADING_STATUS;FontFaceOnload(ah.grsName,{success:function(){e.writeToLog("Font loaded: "+ah.fileName);Z.loadedFonts[ah.grsName]=true},error:function(){e.writeToLog("Failed to load font: "+ah.fileName);Z.loadedFonts[ah.grsName]=false;document.head.removeChild(ag)},timeout:5000})}};Z.prototype.draw=function(af){af.font=this.toString()};Z.prototype.Ready=function(){var af,ag;af=this.getFont();if(af===null){return false}ag=Z.loadedFonts[af.grsName];return ag!==undefined&&ag!==Z.LOADING_STATUS};function a(af,ah,ag){f.call(this);this.x=af;this.y=ah;this.text=ag}f.objectActivators[2]=a;a.prototype=Object.create(f.prototype);a.prototype.constructor=a;a.defaultFont="12px Arial";a.prototype.draw=function(af){af.beginPath();af.textBaseline="top";af.fillText(this.text,this.x,this.y)};a.createElement=function(){var af=new a();return af};a.prototype.parseElement=function(ag,aj){var ai,ah,af;if(ag.byteLength-aj<4){e.writeToLog("Failed to parse Text. At least: 4 bytes are requred! Recieved only: "+ag.byteLength-aj);return -1}ai=new Int16Array(ag,aj,4);this.x=ai[0];this.y=ai[1];aj+=4;af=ai[2];aj+=2;if(ag.byteLength-aj<af){e.writeToLog("Failed to parse Text. At least:"+af+" bytes are requred! Recieved only: "+(ag.byteLength-aj));return -1}ah=new Uint8Array(ag,aj,af);this.text=A.Utf8ArrayToStr(ah);aj+=af;return A.PadTo4(aj)};function X(ah,aj,ag){var ai=ah.measureText(aj.text).width,al=aj.text,af=al,ak="...";while(ai>ag){if(al.length===0){return ak}al=al.slice(0,-1);af=al+ak;ai=ah.measureText(af).width}return{text:af,length:ai}}function J(af,ah,ag){a.call(this,af,ah,ag);this.x=af;this.y=ah;this.text=ag}f.objectActivators[16]=J;J.prototype=Object.create(a.prototype);J.prototype.constructor=a;J.prototype.draw=function(af){var am,an,ag=A.getTextHeight(af),ai,ak;af.beginPath();if(this.rotationAngle!==0){af.save();af.translate(this.rotationCenterX,this.rotationCenterY);af.rotate(this.rotationAngle*(Math.PI/180));af.translate(-this.rotationCenterX,-this.rotationCenterY)}af.textBaseline="top";if(this.wrap){am=A.getLines(af,this.text,this.width);var aj=Math.floor(this.height/ag);var ah=am.length-aj;if(ah>0&&am.length>0){while(ah>0&&am.length>1){var al=am.pop();am[am.length-1].text+=" "+al.text;ah=am.length-aj}am[am.length-1]=X(af,am[am.length-1],this.width)}}else{am=[this.GetSingleLineText(af)]}for(ai=0;ai<am.length;ai+=1){an=am[ai];if(this.wrap){an.length=af.measureText(an.text).width}ak=this.determinePosition(an,ag*am.length);af.fillText(an.text,ak.x,ak.y+ai*ag)}if(this.rotationAngle!==0){af.restore()}};J.prototype.GetSingleLineText=function(af){return X(af,this,this.width)};J.prototype.determinePosition=function(ag,aj){var af,ak,ai=0,ah=0;af=this.x;ak=this.y;if(this.hAlign===J.HAlign.Center){ai=(this.width-ag.length)/2}else{if(this.hAlign===J.HAlign.Right){ai=(this.width-ag.length)}}if(this.vAlign===J.VAlign.Center){ah=(this.height-aj)/2}else{if(this.vAlign===J.VAlign.Bottom){ah=(this.height-aj)}}ai=Math.max(ai,0);ah=Math.max(ah,0);return{x:af+ai,y:ak+ah}};J.createElement=function(){var af=new J();return af};J.Angles=[0,90,180,270];J.VAlign={Top:0,Center:1,Bottom:2};J.HAlign={Left:0,Center:1,Right:2};J.prototype.parseElement=function(ah,ak){var aj,ai,ag,af;if(ah.byteLength-ak<14){e.writeToLog("Failed to parse SmartText. At least: 14 bytes are requred! Recieved only: "+ah.byteLength-ak);return -1}aj=new Int16Array(ah,ak,7);ak+=8;ai=new Uint8Array(ah,ak,4);ak+=6;this.x=aj[0];this.y=aj[1];this.width=aj[2];this.height=aj[3];this.vAlign=ai[0];this.hAlign=ai[1];this.rotationAngle=J.Angles[ai[2]];this.rotationCenterX=this.x+this.width/2;this.rotationCenterY=this.y+this.height/2;if(this.rotationAngle===90||this.rotationAngle===270){this.x+=(this.width/2)-(this.height/2);this.y-=(this.width/2)-(this.height/2);af=this.width;this.width=this.height;this.height=af}this.wrap=ai[3];ag=aj[6];if(ah.byteLength-ak<ag){e.writeToLog("Failed to parse Text. At least:"+ag+" bytes are requred! Recieved only: "+(ah.byteLength-ak));return -1}ai=new Uint8Array(ah,ak,ag);this.text=A.Utf8ArrayToStr(ai);ak+=ag;return A.PadTo4(ak)};function b(ag,ai,ah,af){aa.call(this,ag,ai,ah,af);this.imageId=-1;this.image=null;this.alpha=1;this.rotationAngle=0;this.rotationCenterX=0;this.rotationCenterY=0}f.objectActivators[3]=b;b.prototype=Object.create(aa.prototype);b.prototype.constructor=b;b.AdditionalSizeInBytes=20;b.imageCashe=[];b.prototype.Ready=function(){return this.image&&this.image.ready};b.GetImage=function(ai){var ag,ah,af;if(!b.imageCashe[ai]){ag=new Image();ag.ready=false;ag.broken=false;b.imageCashe[ai]=ag;ah=new ArrayBuffer(8);af=new Uint32Array(ah,0,2);af[0]=e.WsCodes.IMAGE_DATA_REQUEST_CODE;af[1]=ai;e.ws.send(ah)}else{ag=b.imageCashe[ai]}return ag};b.ImageDataFail=function(ag,ai){var af,aj,ah;af=new Uint32Array(ag,ai,1);aj=af[0];ah=b.GetImage(aj);ah.broken=true;ah.ready=true};b.ImageDataReady=function(ai,ak){var ag,am,ah,aj,al,af;if(ai.byteLength-ak<8){e.writeToLog("Failed to parse Image. At least: 8 bytes are requred! Recieved only: "+ai.byteLength-ak);return -1}ag=new Uint32Array(ai,ak,2);am=ag[0];ah=ag[1];aj=b.GetImage(am);ak+=8;al=new Uint8Array(ai,ak,ah);af=new Blob([al],{type:"image/png"});aj.setImageSource(window.URL.createObjectURL(af),b.imageLoaded);return A.PadTo4(ah+ak)};Image.prototype.setImageSource=function(ag,af){this.onload=af;this.onerror=b.imageError;this.src=ag};b.createElement=function(){var af=new b();return af};b.prototype.draw=function(af){if(!this.Ready()){e.writeToLog("Cant draw image! It is not loaded yet!");return}if(this.image.broken){af.save();af.beginPath();af.strokeStyle="#ff0000";af.lineWidth=1;af.moveTo(this.x,this.y);af.lineTo(this.x+this.width,this.y+this.height);af.moveTo(this.x,this.y+this.height);af.lineTo(this.x+this.width,this.y);af.stroke();af.restore()}else{af.save();if(this.rotationAngle!==0){af.translate(this.rotationCenterX,this.rotationCenterY);af.rotate(this.rotationAngle*(Math.PI/180));af.translate(-this.rotationCenterX,-this.rotationCenterY)}af.globalAlpha=this.alpha;af.drawImage(this.image,this.srcX,this.srcY,this.srcW,this.srcH,this.x,this.y,this.width,this.height);af.restore()}};b.prototype.parseElement=function(ag,ai){var af,ah;ai=this.parseBasicProperties(ag,ai);if(ai<0){return -1}if(ag.byteLength-ai<b.AdditionalSizeInBytes){e.writeToLog("Failed to parse Image. At least:"+b.AdditionalSizeInBytes+"bytes are requred! Recieved only: "+(ag.byteLength-ai));return -1}af=new Uint32Array(ag,ai,1);this.imageId=af[0];ai+=4;this.image=b.GetImage(this.imageId);ah=new Uint16Array(ag,ai,8);this.alpha=ah[0]/255;ai+=2;this.rotationAngle=ah[1];ai+=2;this.rotationCenterX=ah[2];ai+=2;this.rotationCenterY=ah[3];ai+=2;this.rotationCenterX+=this.x;this.rotationCenterY+=this.y;this.srcX=ah[4];this.srcY=ah[5];this.srcW=ah[6];this.srcH=ah[7];ai+=8;return A.PadTo4(ai)};b.imageLoaded=function(){this.ready=true};b.imageError=function(){e.writeToLog("Failed to load image.")};function K(){return}K.prototype.elements=[];K.prototype.ignoreDraw=false;K.prototype.Ready=function(){var af;for(af=0;af<this.elements.length;af+=1){if(!this.elements[af].Ready()){return false}}return true};K.prototype.draw=function(af){var ah,ag;if(this.ignoreDraw){return}if(this.visible&&!this.Ready()){e.writeToLog("Cant draw composite object. Not all components are ready!");return}for(ah=0;ah<this.elements.length;ah+=1){ag=this.elements[ah];if(ag.visible){ag.draw(af)}}};function F(ah,aj){var ag,af,ai,al,ak;K.call(this);this.context=aj;this.canvas=ah;this.phase=0;this.text="";this.disconnected=false;this.timer=null;F.prototype.logoElement=new b();F.prototype.discElement=new b();F.prototype.backElement=new W(0,0,0,0);F.prototype.backElement.IsFilled=true;ag=new u(255,255,255,255);af=new u(0,121,193,255);F.prototype.progressRects=[];F.prototype.textElement=new a(0,0,"");this.elements.push(ag);this.elements.push(F.prototype.backElement);this.elements.push(af);for(ai=0;ai<F.rectCount;ai+=1){al=new W(0,0,0,0);al.LineWidth=2;al.IsFilled=false;F.prototype.progressRects.push(al);this.elements.push(al)}this.elements.push(F.prototype.logoElement);this.elements.push(F.prototype.discElement);ak=new u(255,0,0,255);this.elements.push(ak);this.elements.push(F.prototype.textElement)}F.prototype=Object.create(K.prototype);F.prototype.constructor=F;F.imageLogo=false;F.disconnectedImage=false;F.rectCount=5;F.prototype.shiftInterval=function(){this.phase=(this.phase+1)%F.rectCount};F.prototype.stop=function(){clearInterval(this.timer);this.timer=null;this.phase=0};F.prototype.run=function(){if(this.timer!==null){return}var af=this;this.timer=setInterval(function(){if(!af.isLoading()){af.stop();return}af.phase=(af.phase+1)%(F.rectCount+1);af.updateLayoutAndRedraw()},500)};F.prototype.isLoading=function(){return(e.ws.readyState===e.WsState.OPEN||e.ws.readyState===e.WsState.CONNECTING)&&!e.drawingReady};F.prototype.updateLayoutAndRedraw=function(){var au,an,ah,ay,al,am,ak,ar,aq,ap,ao,at,az,ax,aw,av,ag,aj,af,ai;au=this.isLoading();if(!au){this.stop()}if(e.IsConnected()&&e.drawingReady){return}e.TimeoutFixed();if(!F.imageLogo){F.imageLogo=new Image();F.imageLogo.ready=false;an=this;ah=function(){this.ready=true;F.imageLogo.ready=true;an.updateLayoutAndRedraw()};F.imageLogo.setImageSource("Logo.png",ah);return}if(!F.disconnectedImage){F.disconnectedImage=new Image();F.disconnectedImage.ready=false;an=this;ah=function(){this.ready=true;F.disconnectedImage.ready=true;an.updateLayoutAndRedraw()};F.disconnectedImage.setImageSource("Disconnected.png",ah);return}if(!(F.disconnectedImage.ready&&F.imageLogo.ready)){return}this.context.save();ay=this.canvas.width/2;al=this.canvas.height/3;am=Math.min(F.imageLogo.width,ay)/F.imageLogo.width;ak=Math.min(F.imageLogo.height,al)/F.imageLogo.height;ar=Math.min(am,ak);ao=F.imageLogo.width*ar;at=F.imageLogo.height*ar;aq=((this.canvas.width-ao)/2);ap=((this.canvas.height/2)-at);F.prototype.logoElement.x=aq;F.prototype.logoElement.y=ap;F.prototype.logoElement.width=ao;F.prototype.logoElement.height=at;F.prototype.logoElement.srcX=0;F.prototype.logoElement.srcY=0;F.prototype.logoElement.srcW=F.imageLogo.width;F.prototype.logoElement.srcH=F.imageLogo.height;F.prototype.logoElement.image=F.imageLogo;az=F.prototype.discElement;az.visible=e.ws.readyState===e.WsState.CLOSED;if(az.visible){az.x=aq;az.y=ap+at;az.width=ao;az.height=at;az.srcX=0;az.srcY=0;az.srcW=F.disconnectedImage.width;az.srcH=F.disconnectedImage.height;az.image=F.disconnectedImage}F.prototype.backElement.width=this.canvas.width;F.prototype.backElement.height=this.canvas.height;ax=ao*3/4;aw=(ao-ax)/2;if(au&&this.timer===null){this.run()}for(av=0;av<F.rectCount;av+=1){ag=F.prototype.progressRects[av];ag.visible=au;if(ag.visible){ag.IsFilled=this.phase>av;ag.width=ax/(F.rectCount+(F.rectCount-1));ag.height=ag.width;ag.x=aq+((ax/F.rectCount)*av)+aw;ag.y=ap+at+ag.width}}F.prototype.textElement.visible=this.text!=="";if(F.prototype.textElement.visible){F.prototype.textElement.text=this.text;ai=30;this.context.font=ai+"px Arial";aj=this.context.measureText(this.text).width;while(aj>this.canvas.width&&ai>8){ai-=1;this.context.font=ai+"px Arial";aj=this.context.measureText(this.text).width}af=az.visible?(az.y+at):(F.prototype.progressRects[0].y+10+F.prototype.progressRects[0].height);F.prototype.textElement.x=(this.canvas.width-aj)/2;F.prototype.textElement.y=af}this.draw(this.context);this.context.restore()};function j(){return}j.ABNORMAL_CLOSE=1006;j.ABNORMAL_CLOSE_RECONNECTION=1007;j.MAX_USER_LIMIT_REACHED=4000;j.FAILED_TO_START_GWS=4001;j.GWS_DISCONNECTED=4002;j.USER_DISCONNECTED=4003;j.NOT_SPECIFIED=4004;j.USER_DISCONNECTED_LOGOUT=4005;j.FORCED_DISCONNECT=4006;j.Messages=[];j.Messages[j.MAX_USER_LIMIT_REACHED]="Maximum number of connections reached!";j.Messages[j.FAILED_TO_START_GWS]="Failed to start session!";j.Messages[j.GWS_DISCONNECTED]="Remote connection closed!";j.Messages[j.USER_DISCONNECTED]="User disconnected!";j.Messages[j.USER_DISCONNECTED_LOGOUT]="User disconnected!";j.Messages[j.ABNORMAL_CLOSE]="Connection failed!";j.Messages[j.ABNORMAL_CLOSE_RECONNECTION]="Try reconnection!";j.Messages[j.FORCED_DISCONNECT]="Disconnected by another user!";j.ComposeMessage=function(ah,af){var ag;if(e.isReconnectionEnabled&&(ah===j.ABNORMAL_CLOSE)){ah=j.ABNORMAL_CLOSE_RECONNECTION}if(j.MessageCreators.hasOwnProperty(ah)){ag=j.MessageCreators[ah]}else{ag=j.BasicCreator}return ag(ah,af)};j.GWSErrorCreator=function(ag,af){var ah=j.Messages[j.GWS_DISCONNECTED];if(af!==""&&af!=="0"&&af!=="259"){ah+=" ("+af+")"}e.closeReasonSubCode=parseInt(af,10)||65535;return ah};j.BasicCreator=function(ag,af){if(j.Messages.hasOwnProperty(ag)){var ah=j.Messages[ag];if(af!==""){ah+=" ( "+af+")"}return ah}e.writeToLog("Recieved unknown close code: "+ag+"!");return""};j.MessageCreators=[];j.MessageCreators[j.GWS_DISCONNECTED]=j.GWSErrorCreator;function D(){this.Width=0;this.Height=0}D.ByteSize=4;D.prototype.parseFromArrayBuffer=function(af,ah){var ag;if(af.byteLength-ah<D.ByteSize){e.writeToLog("Failed to parse screen header. At least: "+D.ByteSize+" bytes are requred! Recieved only: "+af.byteLength-ah);return -1}ag=new Uint16Array(af,ah,2);this.Width=ag[0];this.Height=ag[1];ah+=4;return ah};window.onerror=function(ah,ag,af){var ai=document.body.getAttribute("JSError");if(ai!==null){ai+="\n"+ah}else{ai=ah}document.body.setAttribute("JSError",ai);e.writeToLog("!ERROR! : "+ah+" URL: "+ag+" LINE: "+af)};var c,G,ab,ad,g,M=new ArrayBuffer(8),w=new Uint32Array(M,0,1),k=new Uint16Array(M,4,2),P=new ArrayBuffer(12),z=new Uint32Array(P,0,1),q=new Uint16Array(P,4,4),T,y="PING",p="PONG",Y=2000,s="READY",m=null,r=null;e.onDocumentReady=function(){var ag,aj,ah,af,ai;e.writeToLog("Page loaded...");e.mainDiv=document.getElementById("mainDiv");if(!e.isCanvasSupported()){e.mainDiv.innerHTML="Your browser is not supported! (Does not support 'Canvas' element.)";return}e.Menu.InitMenu();e.Settings.InitSettings();$("#bigShowMenuButton").click(e.Menu.ShowMenu);g=e.getTargetURL();e.canvas=document.createElement("canvas");e.context=e.canvas.getContext("2d");c=document.getElementById("canvasDiv");G=document.getElementById("canvas1");ab=G.getContext("2d");ad=new F(G,ab);ai=A.debouncer(e.onDocResize,250);$(window).resize(function(){e.writeToLog("Resize in progress");ai()});e.initiateWSConnection();ag=new Hammer.Manager(c);aj=new Hammer.Pinch();ah=new Hammer.Pan();af=new Hammer.Swipe();af.options.direction=Hammer.DIRECTION_HORIZONTAL|Hammer.DIRECTION_VERTICAL;ag.add([af,aj,ah]);ag.get("swipe").recognizeWith("pan");ag.on("pinch pan",e.OnPinchOrPan);ag.on("pinchend panend",e.OnPinchEnd);ag.on("pinchstart panstart",e.OnPinchStart);ag.on("swipe",e.Swipe);document.addEventListener("visibilitychange",e.visibilityChanged,false);document.addEventListener("keypress",e.onKeyPress,false);document.addEventListener("keydown",e.onKeyDown,false)};$(document).ready(e.onDocumentReady);function o(ai,aj){var ah,ag,af,ak;if(e.PinchInProgress||!e.IsConnected()){return}ah=e.mainDiv.offsetLeft;ag=e.mainDiv.offsetTop;af=ai.pageX;ak=ai.pageY;af=Math.round(af-ah);ak=Math.round(ak-ag);af+=e.zeroPoint.x;ak+=e.zeroPoint.y;af/=e.zoomFactor;ak/=e.zoomFactor;af=Math.round(af);ak=Math.round(ak);w[0]=aj;k[0]=af;k[1]=ak;e.ws.send(M)}function ac(af){e.RememberLastClick(af);i(af)}function d(af){e.RememberLastTouch(af);i(af);af.preventDefault()}function i(ag){var af=5;if(ag.targetTouches){af=10}if(e.inControlGRSMode){o(e.lastTouch,e.WsCodes.MOUSE_DATA_CODE_UP);return}if(Math.abs(e.lastMouseDownCoords.x-e.lastTouch.pageX)>af){return}if(Math.abs(e.lastMouseDownCoords.y-e.lastTouch.pageY)>af){return}o(e.lastTouch,e.WsCodes.MOUSE_DATA_CODE_DOWN);o(e.lastTouch,e.WsCodes.MOUSE_DATA_CODE_UP)}function V(af){e.RememberLastClick(af);h(af)}function S(af){e.RememberLastTouch(af);h(af);af.preventDefault()}function h(af){if(af.targetTouches){e.lastMouseDownCoords={x:af.targetTouches[0].pageX,y:af.targetTouches[0].pageY}}else{e.lastMouseDownCoords={x:af.pageX,y:af.pageY}}if(e.inControlGRSMode){o(e.lastTouch,e.WsCodes.MOUSE_DATA_CODE_DOWN)}}function x(af){if(e.enableMouseMove){e.RememberLastClickOrTouch(af);if(e.inControlGRSMode){o(e.lastTouch,e.WsCodes.MOUSE_DATA_CODE_MOVE)}e.enableMouseMove=false}}function E(af){e.enableMouseMove=true;$("#canvas1").bind("move",x);T=window.setInterval(function(){e.enableMouseMove=true},34)}function I(af){$("#canvas1").unbind("move",x);clearInterval(T);e.enableMouseMove=false}e.RememberLastTouch=function(af){if(af.targetTouches&&af.targetTouches.length>0){e.lastTouch=af.targetTouches[0]}};e.RememberLastClick=function(af){e.lastTouch=af};e.RememberLastClickOrTouch=function(af){if(af.targetTouches&&af.targetTouches.length>0){e.lastTouch=af.targetTouches[0]}else{e.lastTouch=af}};function U(){var ai,ah,ag,af;if(e.elements.length===0){return}ah=false;for(ai=0,af=e.elements.length;ai<af;ai+=1){ag=e.elements[ai];if(!ag.Ready()){ah=true;break}ag.draw(e.context);e.objectsDrawn+=1}if(ai>0){e.elements=e.elements.slice(ai,e.elements.length)}if(!ah){if(!e.drawingReady){e.drawingReady=true}e.RefreshOnScreenCanvas()}if(ah){if(m===null){m=setInterval(U,50)}}else{if(m!==null){clearInterval(m);m=null}}}e.initiateWSConnection=function(){if(!g){e.writeToLog("Failed to initiate host address.");return}e.header=null;ad.text="";e.ws=new WebSocket(g,"control-protocol");e.ws.binaryType="arraybuffer";e.ws.onopen=e.onWsOpen;e.ws.onerror=e.onWsError;e.ws.onmessage=e.onWsMessage;e.ws.onclose=e.onWsClose;e.RefreshOnScreenCanvas()};e.disconnectWSConnection=function(){if(e.ws===undefined){return}e.writeToLog("Closing connection");e.ws.close(j.USER_DISCONNECTED)};e.logout=function(){e.isReconnectionEnabled=false;if(!e.IsConnected()){return}e.writeToLog("Loging out.");e.ws.close(j.USER_DISCONNECTED_LOGOUT)};e.onWsClose=function(af){e.elements=[];e.cleanCanvas();e.gwsHasConnected=false;e.drawingReady=false;e.closeReasonCode=af.code;if(r!==null){clearInterval(r)}r=null;if(af.code===j.GWS_DISCONNECTED){e.isReconnectionEnabled=false}e.TimeoutFixed();e.writeToLog("Connection closed. Reason:"+af.reason+" Code: "+af.code+" Was clean: "+af.wasClean);var ag=j.ComposeMessage(af.code,af.reason);ad.text=ag;G.removeEventListener("touchstart",S);G.removeEventListener("touchend",d);G.removeEventListener("mouseup",ac);G.removeEventListener("mousedown",V);e.header=null;e.RefreshOnScreenCanvas();if(e.isReconnectionEnabled){setTimeout(function(){e.initiateWSConnection()},5000)}};e.onWsOpen=function(af){e.writeToLog("Connected to: "+$("#host").val());e.cleanCanvas();G.addEventListener("touchstart",S);G.addEventListener("touchend",d);G.addEventListener("mouseup",ac);G.addEventListener("mousedown",V);$("#canvas1").bind("movestart",E);$("#canvas1").bind("moveend",I);r=setInterval(e.sendHearthBeat,Y);e.ws.send(s)};e.TimeoutPending=function(){e.writeToLog("Timeout pening!");$("#timeoutDiv").css("display","initial");e.timeoutIsPending=true;var af=document.getElementById("timeoutDiv");if(e.timeoutSpinner===undefined){e.timeoutSpinner=new Spinner(e.timeoutSpinnerOpts)}e.timeoutSpinner.spin(af)};e.TimeoutFixed=function(){e.writeToLog("Timeout canceled!");$("#timeoutDiv").css("display","none");e.timeoutIsPending=false;if(e.timeoutSpinner!==undefined){e.timeoutSpinner.stop()}e.missedHearhBeats=0};e.sendHearthBeat=function(){if(!e.IsConnected()){return}e.ws.send(y);if(e.logPingPongs){e.writeToLog(y)}if(!e.timeoutIsPending&&(e.missedHearhBeats>e.timeout)){e.TimeoutPending()}e.missedHearhBeats+=1};e.onWsError=function(af){e.header=null;e.RefreshOnScreenCanvas();e.writeToLog("Error "+af.data)};e.onWsMessage=function(af){if(!e.gwsHasConnected){e.gwsHasConnected=true}e.handleServerResponse(af.data)};e.FixPanZeroPoint=function(){var aj=e.GetPixelZoom(),ah=e.canvas.width/aj,ak=e.canvas.height/aj,ag=c.clientWidth,ai=c.clientHeight,af;af=e.zeroPoint;af.x=Math.min(af.x,ah-ag);af.x=Math.max(af.x,0);af.y=Math.min(af.y,ak-ai);af.y=Math.max(af.y,0);e.zeroPoint=af};e.OnPinchStart=function(af){e.pinchZoom=0;e.PanInProgress=af.type==="panstart";e.PinchInProgress=af.type==="pinchstart";e.panCenterPoint=e.ConvertToCanvasCoordinates(af.center)};e.ConvertToCanvasCoordinates=function(ag){var af,ah;af=((ag.x+e.zeroPoint.x)/(e.zoomFactor+e.pinchZoom));ah=((ag.y+e.zeroPoint.y)/(e.zoomFactor+e.pinchZoom));return{x:af,y:ah}};e.OnPinchOrPan=function(ag){var af=0;if(!e.IsConnected()||e.inControlGRSMode){return}if(ag.type==="pan"&&!e.PanInProgress){return}if(ag.type==="pinch"){if(!e.PinchInProgress){return}af=ag.scale;if(af>1){af=-1/af;af+=1}else{af-=1}}if(!e.Settings.Values[C.Options.FixZoomOn1]){e.pinchZoom=af;if(e.zoomFactor+e.pinchZoom<=e.minZoomFactor){e.pinchZoom=e.minZoomFactor-e.zoomFactor}if(e.zoomFactor+e.pinchZoom>e.maxZoomFactor){e.pinchZoom=e.maxZoomFactor-e.zoomFactor}}e.CenterOnPoint(ag.center);if(e.PanInProgress){e.FixPanZeroPoint()}e.RefreshOnScreenCanvas()};e.CenterOnPoint=function(ag){var ai,ah,af,ak,aj;ai=e.ConvertToCanvasCoordinates(ag);ah=(e.panCenterPoint.x-ai.x)*(e.zoomFactor+e.pinchZoom);af=(e.panCenterPoint.y-ai.y)*(e.zoomFactor+e.pinchZoom);ak=Math.max(e.zeroPoint.x+ah,0);aj=Math.max(e.zeroPoint.y+af,0);e.zeroPoint={x:ak,y:aj}};e.SetZoomFactor=function(af){if(e.Settings.Values[C.Options.FixZoomOn1]||!e.IsConnected()){return}e.zoomFactor=af;e.FixMinAndDefaultZoomFactor();e.UpdateCanvasSize();e.FixPanZeroPoint();e.RefreshOnScreenCanvas()};e.OnPinchEnd=function(af){e.PanInProgress=false;e.PinchInProgress=false;e.zoomFactor+=e.pinchZoom;e.pinchZoom=0;if(af.type==="pinchend"){e.UpdateCanvasSize();e.FixPanZeroPoint()}};e.handleServerResponse=function(ah){var af,ag,ai;if(ah instanceof ArrayBuffer){af=0;e.totalBytesRecieved+=ah.byteLength;e.bytesLastSecond+=ah.byteLength;ag=new Uint32Array(ah,0,1);ai=ag[0];af+=4;if(ai===e.WsCodes.PAINT_DATA_CODE){e.parseElements(ah,af)}else{if(ai===e.WsCodes.IMAGE_DATA_RESPONSE_CODE){b.ImageDataReady(ah,af)}else{if(ai===e.WsCodes.IMAGE_DATA_FAIL){b.ImageDataFail(ah,af)}else{if(ai===e.WsCodes.FONT_DATA_RESPONSE_CODE){Z.parseFontData(ah,af)}else{if(ai===e.WsCodes.FONT_CACHE_RESET_CODE){Z.clearCache()}else{if(ai===e.WsCodes.STORE_PARAM){e.Settings.StoreAppData(ah,af)}else{if(ai===e.WsCodes.GET_PARAM){e.Settings.SendAppData(ah,af)}else{e.writeToLog("Unknown request ID: "+ai)}}}}}}}}else{if(ah===p){e.missedHearhBeats=0;if(e.timeoutIsPending){e.TimeoutFixed()}if(e.logPingPongs){e.writeToLog(p)}return}}e.redraw()};e.cleanCanvas=function(){var af,ag;e.context.restore();e.context.save();e.context.setTransform(1,0,0,1,0,0);af=e.canvas.width;ag=e.canvas.height;e.context.beginPath();e.context.rect(0,0,af,ag);e.context.clip();e.context.closePath();e.context.clearRect(0,0,af,ag);e.context.restore()};e.redraw=function(){U()};e.parseElements=function(ag,af){var ah;ah=e.header;e.header=new D();af=e.header.parseFromArrayBuffer(ag,af);if(af<0){e.writeToLog("Failed to parse screen header!");return}if(!ah){e.ApplyNewHeader()}while(af<ag.byteLength){if(af<0){e.writeToLog("Parsing cancelled with error!");break}af=e.parseElement(ag,af)}};e.FixMinAndDefaultZoomFactor=function(){var ai,ah,ag,aj,af;if(!e.IsConnected()){return}if(e.Settings.Values[C.Options.FixZoomOn1]){e.zoomFactor=1;e.minZoomFactor=e.zoomFactor;e.zoomFactorInCanvas=e.zoomFactor;return}ai=c.clientWidth/e.header.Width;ah=c.clientHeight/e.header.Height;e.minZoomFactor=Math.min(ai,ah);if(e.zoomFactor===-1||e.minZoomFactor>e.zoomFactor){e.zoomFactor=e.minZoomFactor}aj=Math.floor(e.maxZoomedCanvasSize/e.header.Width);af=Math.floor(e.maxZoomedCanvasSize/e.header.Width);e.maxZoomFactor=Math.min(aj,af);e.zoomFactor=Math.min(e.maxZoomFactor,e.zoomFactor);ag=Math.ceil(e.zoomFactor);e.zoomFactorInCanvas=ag;return};e.ApplyNewHeader=function(){e.FixMinAndDefaultZoomFactor();e.UpdateCanvasSize(false)};e.UpdateCanvasSize=function(af){var ah,ag;if(!e.IsConnected()){return}if(e.PinchInProgress){return}e.FixMinAndDefaultZoomFactor();af=af!==undefined?af:true;ah=Math.round(e.header.Width*e.zoomFactorInCanvas);ag=Math.round(e.header.Height*e.zoomFactorInCanvas);if(e.canvas.width!==ah||e.canvas.height!==ag){e.canvas.width=ah;e.canvas.height=ag;if(af){e.requestRedraw(0,0,e.header.Width,e.header.Height)}}e.pinchZoom=0};e.UpdateOnScreenCanvasSize=function(){if(G.clientWidth!==c.clientWidth){G.style.width=c.clientWidth+"px"}if(G.clientHeight!==c.clientHeight){G.style.height=c.clientHeight+"px"}G.width=c.clientWidth;G.height=c.clientHeight};e.GetPixelZoom=function(){var af=1;if(e.PinchInProgress){af=e.zoomFactor/(e.zoomFactor+e.pinchZoom)}if(e.zoomFactorInCanvas!==e.zoomFactor){af*=e.zoomFactorInCanvas/e.zoomFactor}return af};e.RefreshOnScreenCanvas=function(af){e.checkZoomAndPanOnNextRedraw=af;requestAnimationFrame(e.RefreshOnScreenCanvasCore)};e.RefreshOnScreenCanvasCore=function(){var ah,aq,au,ai,at,ag,ao,ak,aj,ar,ap,af,am,al,an;if(!e.header){e.UpdateOnScreenCanvasSize();ad.updateLayoutAndRedraw();return}if(e.checkZoomAndPanOnNextRedraw){e.CheckZoomAndPan();e.checkZoomAndPanOnNextRedraw=false}e.UpdateOnScreenCanvasSize();ab.save();ah=c.clientWidth;aq=c.clientHeight;ab.beginPath();ab.fillStyle="#A0A0A0";ab.rect(0,0,ah,aq);ab.closePath();ab.fill();au=e.GetPixelZoom();ai=ah;at=aq;ag=ah*au;ao=aq*au;ak=e.zeroPoint.x*au;aj=e.zeroPoint.y*au;ar=Math.min((e.canvas.width-ak)/ag,1);ap=Math.min(c.clientWidth/ai,1);af=Math.min(ar,ap);am=Math.min((e.canvas.height-aj)/ao,1);al=Math.min(c.clientHeight/at,1);an=Math.min(al,am);ag=Math.min(Math.round(ag*af),e.canvas.width-ak);ao=Math.min(Math.round(ao*an),e.canvas.height-aj);ai=Math.min(Math.round(ai*af),c.clientWidth);at=Math.min(Math.round(at*an),c.clientHeight);ab.drawImage(e.canvas,ak,aj,ag,ao,0,0,ai,at);ab.restore();e.repaints+=1};e.requestRedraw=function(ag,aj,ai,af){if(!e.IsConnected()){return}var ah;for(ah=0;ah<e.elements.length;ah+=1){if(!e.elements[ah].canBeSkipped()){e.elements[ah].draw(e.context);e.objectsDrawn+=1}}e.elements=[];e.cleanCanvas();z[0]=e.WsCodes.INVALIDATE_CODE;q[0]=ag;q[1]=aj;q[2]=ai;q[3]=af;e.ws.send(P);e.writeToLog("Requesting redraw")};e.onDocResize=function(){e.RefreshOnScreenCanvas(true)};e.addElementToDraw=function(af){e.elements.push(af)};e.parseElement=function(ai,aj){var af,ah,ag,ak=aj;af=new Uint32Array(ai,aj,1);if(!(f.objectActivators.hasOwnProperty(af[0]))){e.writeToLog("Object of unknown ID: "+af[0]);return}ah=f.objectActivators[af[0]];ak+=4;ag=ah.createElement();ak=ag.parseElement(ai,ak);e.addElementToDraw(ag);return ak};function Q(ag,ai,ah,af){O.call(this,ag,ai,ah,af);this.startAngle=0;this.endAngle=360;this.isFullArc=true}f.objectActivators[1]=Q;Q.prototype=Object.create(O.prototype);Q.prototype.constructor=Q;Q.AdditionalSizeInBytes=4;Math.toRadians=function(af){return af*Math.PI/180};Q.prototype.draw=function(af){if(this.width===this.height){this.drawArc(af);return}if(af.ellipse===undefined){if(this.isFullArc){this.drawFullEllipse(af)}}else{this.drawPartialEllipse(af)}};Q.prototype.drawArc=function(ai){var ah,ag,af,aj;if(this.IsFilled){ah=0}else{ah=this.LineWidth/2}ag=(this.width/2)-ah;ai.beginPath();af=this.x+ag+ah;aj=this.y+ag+ah;if(ag>0){ai.arc(af,aj,ag,this.startAngle,this.endAngle,true);this.strokeOrFill(ai)}};Q.prototype.drawPartialEllipse=function(ag){var af,ai,ah;if(this.IsFilled){af=0}else{af=this.LineWidth/2}ai=(this.width/2)-af;ah=(this.height/2)-af;ag.beginPath();ag.ellipse(this.x+ai+af,this.y+ah+af,ai,ah,0,this.startAngle,this.endAngle,true);this.strokeOrFill(ag)};Q.prototype.drawFullEllipse=function(ag){var am,ak,ai,al,ar,ap,aj,af,aq,ao,an,ah;if(this.IsFilled){am=0}else{am=this.LineWidth}ak=this.x+am/2;ai=this.y+am/2;al=this.width-am;ar=this.height-am;ap=0.5522848;aj=(al/2)*ap;af=(ar/2)*ap;aq=ak+al;ao=ai+ar;an=ak+al/2;ah=ai+ar/2;ag.save();ag.beginPath();ag.moveTo(ak,ah);ag.bezierCurveTo(ak,ah-af,an-aj,ai,an,ai);ag.bezierCurveTo(an+aj,ai,aq,ah-af,aq,ah);ag.bezierCurveTo(aq,ah+af,an+aj,ao,an,ao);ag.bezierCurveTo(an-aj,ao,ak,ah+af,ak,ah);ag.closePath();this.strokeOrFill(ag);ag.restore()};Q.createElement=function(){var af=new Q();return af};Q.prototype.parseElement=function(ag,ai){var af,ah;ai=O.prototype.parseElement.call(this,ag,ai);if(ai<0){return -1}if(ag.byteLength-ai<Q.AdditionalSizeInBytes){e.writeToLog("Failed to parse Elipse. At least:"+Q.AdditionalSizeInBytes+" bytes are requred! Recieved only: "+ag.byteLength-ai);return -1}af=new Int16Array(ag,ai,2);ah=Math.abs(af[0]-af[1]);if(ah!==0&&ah===360){this.startAngle=0;this.endAngle=Math.PI*2;this.isFullArc=true}else{this.isFullArc=false;this.startAngle=(360-af[0])*(Math.PI/180);this.startAngle=this.startAngle%(Math.PI*2);this.endAngle=(360-af[1])*(Math.PI/180);this.endAngle=this.endAngle%(Math.PI*2)}return ai+Q.AdditionalSizeInBytes};function N(){f.call(this);this.pointCount=0;this.points=[]}f.objectActivators[6]=N;N.prototype=Object.create(f.prototype);N.prototype.constructor=N;N.MinSizeInBytes=12;N.createElement=function(){var af=new N();return af};N.prototype.parseElement=function(ah,ai){var ag,aj,af;if(ah.byteLength-ai<N.MinSizeInBytes){e.writeToLog("Failed to parse poly line. At least: "+N.MinSizeInBytes+" bytes are requred! Recieved only: "+ah.byteLength-ai);return -1}ag=new Uint16Array(ah,ai,2);this.lineWidth=ag[0];this.pointCount=ag[1];ai+=4;aj=new Float32Array(ah,ai,this.pointCount*2);for(af=0;af<this.pointCount;af+=1){this.points.push(aj[af*2]);this.points.push(aj[(af*2)+1])}ai+=this.pointCount*8;return A.PadTo4(ai)};N.prototype.preDraw=function(ah){var ag,af,ai;ah.beginPath();ah.lineWidth=this.lineWidth;ah.moveTo(this.points[0],this.points[1]);for(ag=0;ag<this.pointCount;ag+=1){af=this.points[ag*2];ai=this.points[(ag*2)+1];if(ag===this.pointCount-1&&af===this.points[0]&&ai===this.points[1]){ah.closePath()}else{ah.lineTo(af,ai)}}};N.prototype.draw=function(af){this.preDraw(af);af.stroke()};function L(){N.call(this);this.pointCount=0;this.points=[]}f.objectActivators[10]=L;L.prototype=Object.create(N.prototype);L.prototype.constructor=L;L.createElement=function(){var af=new L();return af};L.prototype.draw=function(ah){var ag,af,ai;ah.beginPath();ah.lineWidth=this.lineWidth;ah.moveTo(this.points[0],this.points[1]);for(ag=0;ag<this.pointCount;ag+=1){af=this.points[ag*2];ai=this.points[(ag*2)+1];ah.lineTo(af,ai)}ah.closePath();ah.fill()};function t(){N.call(this);this.pointCount=0;this.points=[]}f.objectActivators[11]=t;t.prototype=Object.create(N.prototype);t.prototype.constructor=t;t.AdditionalSizeInBytes=4;t.createElement=function(){var af=new t();return af};t.prototype.parseElement=function(af,ag){ag=N.prototype.parseElement.call(this,af,ag);if(ag<0){return -1}if(af.byteLength-ag<t.AdditionalSizeInBytes){e.writeToLog("Failed to parse filled lined polygon. At least:"+t.AdditionalSizeInBytes+" bytes are requred! Recieved only: "+af.byteLength-ag);return -1}this.lineColor=new u();ag=this.lineColor.parseElement(af,ag);return A.PadTo4(ag)};t.prototype.draw=function(af){af.save();this.preDraw(af);af.fill();af.strokeStyle=this.lineColor.asString;af.lineWidth=this.lineWidth;af.stroke();af.restore()};function l(){N.call(this);this.pointCount=0;this.points=[]}f.objectActivators[9]=l;l.prototype=Object.create(N.prototype);l.prototype.constructor=l;l.createElement=function(){var af=new l();return af};l.prototype.draw=function(aj){var ai,ag,ak,af,ah;aj.lineWidth=this.lineWidth;for(ai=0;ai<this.pointCount;ai=ai+2){aj.beginPath();ag=this.points[(ai*2)];ak=this.points[(ai*2)+1];af=this.points[(ai+1)*2];ah=this.points[((ai+1)*2)+1];aj.moveTo(ag,ak);aj.lineTo(af,ah);aj.stroke();aj.closePath()}};window.GWeb=e}());